<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Friendship Finder - The Results</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;900&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #111827; /* Dark Blue-Gray Background */
        }
        /* Custom styles for the dropdown */
        select {
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            background-image: url('data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%239CA3AF%22%20d%3D%22M287%2069.4a17.6%2017.6%200%200%200-13-5.4H18.4c-5%200-9.3%201.8-12.9%205.4A17.6%2017.6%200%200%200%200%2082.2c0%205%201.8%209.3%205.4%2012.9l128%20127.9c3.6%203.6%207.8%205.4%2012.8%205.4s9.2-1.8%2012.8-5.4L287%2095c3.5-3.5%205.4-7.8%205.4-12.8%200-5-1.9-9.2-5.5-12.8z%22%2F%3E%3C%2Fsvg%3E');
            background-repeat: no-repeat;
            background-position: right 1rem center;
            background-size: .65em auto;
        }
    </style>
</head>
<body class="text-gray-300">

    <!-- Hero Section -->
    <section class="min-h-screen flex flex-col items-center justify-center text-center p-4">
        <div class="max-w-4xl">
            <header class="mb-8">
                <h1 class="text-5xl sm:text-7xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-sky-300 to-blue-900 mb-3">
                    THE EXPERIMENT IS DONE
                </h1>
                <p class="text-xl text-gray-400">Thank you to the 112 participants! The results are in.</p>
            </header>

            <!-- Results Section -->
            <div class="w-full max-w-lg mx-auto bg-gray-900/50 border border-sky-500/30 rounded-lg p-8 mt-10">
                <h2 class="text-2xl font-bold text-white mb-4">Get Your Match Data</h2>
                <p class="text-gray-400 mb-6">Select your name from the list below to download your personal friendship pact results.</p>
                
                <div class="space-y-4">
                    <select id="name-select" class="w-full bg-gray-800 border border-gray-700 text-white text-lg rounded-lg focus:ring-sky-500 focus:border-sky-500 block p-4">
                        <option value="">-- Select Your Name --</option>
                        <!-- Names will be populated by JavaScript -->
                    </select>
                    
                    <button id="download-button" disabled class="w-full bg-sky-600 text-white font-bold text-xl py-4 px-10 rounded-lg shadow-lg shadow-sky-500/30 transition-all duration-300 disabled:bg-gray-700 disabled:text-gray-500 disabled:cursor-not-allowed disabled:shadow-none hover:bg-sky-700">
                        Download Your Match Data
                    </button>
                </div>
                 <p id="error-message" class="text-red-400 mt-4 hidden">Could not find the results file. Please contact the organizer.</p>
            </div>

        </div>
    </section>

    <!-- Main Content Container -->
    <div class="container mx-auto max-w-4xl p-4 sm:p-8">
        <section class="mb-16">
            <h2 class="text-3xl font-bold text-center mb-8 text-sky-400">Some words from the last time we did this</h2>
            <!-- Testimonials are unchanged and remain below -->
            <div class="space-y-8">
                <div class="bg-gray-800 rounded-lg p-6 border border-blue-500/30">
                    <div class="text-gray-300 italic border-l-4 border-blue-500 pl-4 mb-4 space-y-3">
                        <p>I did not know Malay before this, and we got in touch. We both realized we shared a lot of similarities, and I think we are good friends now. So, kudos to the algorithm.</p>
                        <p>But honestly, we didn't really talk much after we were matched. I'm extremely introverted and avoid talking to strangers if I can. Your algorithm had matched us, but that didn't change the fact that he was still just a stranger. And Malay also did not seem to be pushing much. We had a couple of text exchanges, and we would nod to each other when we crossed, but we weren't really friends. I think the only reason we ended up becoming friends is because we were both a part of Vedant's Campaign.</p>
                        <p>All-in-all, I think the algorithm did a good job. It did find a potential good friend. Whether one would end up becoming friends with this person, I suppose, depends on a lot of other personal and practical Factors.</p>
                    </div>
                    <cite class="text-right block font-semibold text-gray-200 not-italic">- Vighnesh Sangle (matched with Malay Devashish)</cite>
                </div>

                <div class="bg-gray-800 rounded-lg p-6 border border-blue-500/30">
                    <div class="text-gray-300 italic border-l-4 border-blue-500 pl-4 mb-4">
                        <p>Breaking the ice with someone you dont know at all is harder and requires less motivation than with someone you have heard of (someone in your batch, junior or senior year or same year maybe) but not maybe in your close friend circle. It would be nice if the algo recommended friends within the same batch (Eg: A CS student to another CS student)</p>
                    </div>
                    <cite class="text-right block font-semibold text-gray-200 not-italic">- Salokya (matched with Anhad)</cite>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <div class="bg-gray-800 rounded-lg p-6 border border-blue-500/30">
                        <div class="text-gray-300 italic border-l-4 border-blue-500 pl-4 mb-4">
                            <p>We two were already really good friends to begin with. This means your algorithm is working well !!!</p>
                        </div>
                        <cite class="text-right block font-semibold text-gray-200 not-italic">- Narendra C (matched with Bibek Paul)</cite>
                    </div>
                     <div class="bg-gray-800 rounded-lg p-6 border border-blue-500/30">
                        <div class="text-gray-300 italic border-l-4 border-blue-500 pl-4 mb-4">
                            <p>I don't know what metrics you used but they matched me perfectly with my buddy. We were already in the same friends group and he is the person I most connected in CMI. So from my end, you algorithm works perfectly.</p>
                        </div>
                        <cite class="text-right block font-semibold text-gray-200 not-italic">- Bibek Paul (matched with Narendra C)</cite>
                    </div>
                </div>

                <div class="bg-gray-800 rounded-lg p-6 border border-blue-500/30">
                    <div class="text-gray-300 italic border-l-4 border-blue-500 pl-4 mb-4 space-y-3">
                        <p>I'd known from before since he joined me and suchir in the best random team for the literature tournament. We were on fire. after that i kind of reached out to him a few times, even invited to my bday; but alas he was too shy to respond to any of them. he seems like a talented guy but got stuck in a loop of non-interaction and spending all his time on the internet. I wish he improves after I leave.</p>
                        <p>maybe it would be nice to have questions that gauge the person's desire to socialize in a better. I know I matched 2nd with Gautham which would be pretty accurate. Thanks for the sick experiment.</p>
                    </div>
                    <cite class="text-right block font-semibold text-gray-200 not-italic">- Vedant Neema (matched with Aryan Chandela)</cite>
                </div>
                
                <div class="bg-gray-800 rounded-lg p-6 border border-blue-500/30">
                    <div class="text-gray-300 italic border-l-4 border-blue-500 pl-4 mb-4">
                       <p>We talked a couple of times. It was nice talking to her. A batchmate also said that that we speak in a similar manner.</p>
                    </div>
                    <cite class="text-right block font-semibold text-gray-200 not-italic">- Maria Paul (matched with Anusha Gupta)</cite>
                </div>

                <div class="bg-gray-800 rounded-lg p-6 border border-blue-500/30">
                    <div class="text-gray-300 italic border-l-4 border-blue-500 pl-4 mb-4 space-y-3">
                       <p>I know you worked very hard on this project but you paired a MI fan with a dhoni fan. I would suggest you add a sports section to this.</p>
                       <p>Other than that Karan is a cool guy, plays too much factorio but we all have addictions.</p>
                    </div>
                    <cite class="text-right block font-semibold text-gray-200 not-italic">- Mandar Ajinthekar (matched with Karan Gupta)</cite>
                </div>
            </div>
        </section>

        <!-- FAQ is unchanged and remains below -->
        <section>
            <h2 class="text-4xl font-bold text-center mb-10 text-white">FREQUENTLY ASKED QUESTIONS</h2>
            <div class="space-y-8 max-w-3xl mx-auto">
                <div>
                    <h3 class="font-bold text-xl text-cyan-400 mb-2">HOW DOES THIS WORK?</h3>
                    <p class="text-gray-400">You fill out a questionnaire. We feed the responses into a stable matching algorithm (look up Irving's Algorithm if you're curious, or better go to the <a href="https://github.com/TheArjunAgarwal/open-pact" target="_blank" class="font-italic text-purple-300">github repo of this project and look at the exact algorithm I am using</a>). The algorithm computes a set of optimal pairs based on everyone's preferences. We email you your match. The rest is up to you.</p>
                </div>
                <div>
                    <h3 class="font-bold text-xl text-cyan-400 mb-2">IS MY DATA SAFE?</h3>
                    <p class="text-gray-400">The privacy policy of this project is a short 66 words. The 66 words are:</p>
                    <q class="text-gray-400">I am not gonna sell your data. I am probably not even gonna look at it. At the end of form time, I will just export the csv which will be the import to my code, which will return csv of matches which will go to a SMTP server (hosted on my computer) and you'll all get the mail. 
                        
                    And then I will delete all data.
                    </q>
                </div>
                <div>
                    <h3 class="font-bold text-xl text-cyan-400 mb-2">WHAT IS THE GUARANTEE YOU WILL NOT USE THIS ALGORITHM TO FURTHER YOUR MEANS?</h3>
                    <p class="text-gray-400">I will release a hashed response and match data (the names will be hashed). You can run the algorithm yourself.</p>
                </div>
                <div>
                    <h3 class="font-bold text-xl text-cyan-400 mb-2">HOW WERE THE QUESTIONS CHOSEN?</h3>
                    <p class="text-gray-400">A number of questions were inherited from <a href="https://marriagepact.com/" target="_blank" class="font-italic text-purple-300">Marriage Pact</a>, a similar yearly tradition at Stanford. This year, we pruned a lot of the questions which were highly correlate, added more questions from <a href="https://openpsychometrics.org/" target="_blank" class="font-italic text-purple-300">Open Psychometrics</a> and <a href="https://putanumonit.com/2022/09/02/date-me-doc/" target="_blank" class="font-italic text-purple-300">Date-Me-Forms</a> by a number of people.</p>
                    <p class="text-gray-400">Finally, a major source questions were just stuff people suggested I add on the form. I have added questions to try to fix all the grievances established in the testimonials.</p>
                </div>
                <div>
                    <h3 class="font-bold text-xl text-cyan-400 mb-2">WHAT IF I HATE MY MATCH?</h3>
                    <p class="text-gray-400">Then our work here is done. We gave you a conversation starter. You don't have to get married, just maybe say "hi." If it doesn't work out, that's okay. This is a low-stakes fun experiment.</p>
                </div>
                <div>
                    <h3 class="font-bold text-xl text-cyan-400 mb-2">WHY IS THE DATING FORM THINGIE NOT HAPPENING?</h3>
                    <p class="text-gray-400">Because given the gender ratio of this campus, It would lead to a lot of people being unmatched. This would either make them angry or depressed and I don't want either to happen.</p>
                </div>
                <div>
                    <h3 class="font-bold text-xl text-cyan-400 mb-2">WHAT IF I HAVE MORE QUESTIONS?</h3>
                    <p class="text-gray-400">You do know that I am student on the same campus? Just grab me at any time I look free and I'll be glad to answer. You can also mail me on <a href="mailto:arjuna.ug2024@cmi.ac.in" class="font-italic text-purple-300">arjuna dot ug2024 at cmi dot ac dot in</a></p>
                </div>
                <div>
                    <h3 class="font-bold text-xl text-cyan-400 mb-2">I DON'T THINK AN ALGORITHM CAN CREATE/PREDICT GENUINE FRIENDSHIP. WHO CAN I COMPLAIN TO?</h3>
                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-x-8 gap-y-4 mt-4 text-gray-400">
                        <div>
                            <p class="font-semibold text-white">Alvin E. Roth</p>
                            <p>Nobel Prize in Economic Sciences</p>
                            <p>Department of Economics</p>
                            <p>Stanford University</p>
                        </div>
                        <div>
                            <p class="font-semibold text-white">The Royal Swedish Academy</p>
                            <p>Awarders of the Nobel Prize</p>
                            <p>Box 50005</p>
                            <p>SE-104 05 Stockholm, Sweden</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        
        <footer class="text-center mt-16 py-8 border-t border-gray-800">
            <p class="text-gray-600">Friendship Finder © 2025</p>
        </footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const nameSelect = document.getElementById('name-select');
            const downloadButton = document.getElementById('download-button');
            const errorMessage = document.getElementById('error-message');

            // --- IMPORTANT ---
            // This script assumes a 'names.csv' file exists in the same directory.
            // It also assumes a '/goodies/' directory exists with result files
            // named exactly like the entries in 'names.csv' (e.g., "Arjun Agarwal.csv").

            // Fetch the list of names from names.csv
            fetch('names.csv')
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Network response was not ok');
                    }
                    return response.text();
                })
                .then(data => {
                    // Split the text into an array of names, filtering out empty lines
                    const names = data.trim().split('\n').filter(name => name.trim() !== '');
                    
                    // Populate the dropdown
                    names.forEach(name => {
                        const option = document.createElement('option');
                        option.value = name.trim();
                        option.textContent = name.trim();
                        nameSelect.appendChild(option);
                    });
                })
                .catch(error => {
                    console.error('Error fetching or parsing names.csv:', error);
                    nameSelect.disabled = true;
                    nameSelect.querySelector('option').textContent = 'Could not load names';
                });

            // Enable/disable the download button based on selection
            nameSelect.addEventListener('change', () => {
                if (nameSelect.value) {
                    downloadButton.disabled = false;
                    errorMessage.classList.add('hidden');
                } else {
                    downloadButton.disabled = true;
                }
            });

            // Handle the download button click
            downloadButton.addEventListener('click', async () => {
                const selectedName = nameSelect.value;
                if (!selectedName) return;

                const filePath = `goodies/${selectedName}.csv`;

                try {
                    // Check if the file exists before attempting to download
                    const response = await fetch(filePath, { method: 'HEAD' });
                    if (!response.ok) {
                         // File does not exist or there's another issue
                        throw new Error(`File not found: ${response.statusText}`);
                    }

                    // Create a temporary link element to trigger the download
                    const link = document.createElement('a');
                    link.href = filePath;
                    link.download = `${selectedName}.csv`; // The filename for the user
                    document.body.appendChild(link);
                    link.click();
                    document.body.removeChild(link);
                    errorMessage.classList.add('hidden');

                } catch (error) {
                    console.error('Error during download:', error);
                    errorMessage.classList.remove('hidden');
                }
            });
        });
    </script>

</body>
</html>
